[Music] [Music] back to our Channel Total technology Zone this is tutorial 47 and today I'll be going to do very interesting uh like use case uh from the name itself clear that I'll be going to uh I I'll try to actually predict the election 2024 results using Lang chain and open AI so basically uh it's a general election which is going to be held in India for uh selecting our next prime minister and I'll try to actually uh predict the uh like public opinion uh based on uh based on their comments uh which is available in some public platform right so what exactly I'll be going to do I'll explain you uh so basically uh let me open my this thing so basically uh I'll be going to actually U uh open one YouTube video the YouTube video is actually here so one of the opinion poll from 2024 which I think this video was published two weeks ago and it has like very decent number of views like 17 1.7 million views and couple of like 4,000 comments are there so basically uh I'll try to actually predict based on this 4,000 comment how the public how the public opinion is actually uh going to uh give an um indication whether they are like whether they're going to give their opinion uh uh with the with the with the rec with the with the present uh like government or they are actually kind of biased towards the like the opponent like parties like so yeah obviously whatever I'll be going to do here it is not going to be exactly the accurate thing but uh it will at least going to give you some idea like how if you want to predict based on the public sentiment or the user sentiment you can actually do or do the same thing for large number of videos like let's say you are going to actually do the same thing for let's say 100 videos like which is published over last one month and which is having let's say uh let's say 5 to 10 million views like basically you have to actually uh load every comment from those videos and after that you can do the same thing probably the result will will be more interesting but here I'll show you actually how to do it with the help of one video and after that you can do the same thing with other videos so basically uh what exactly I'll be going to do if you see here like I'll first load the comments from a political uh video like which I show you after that I'll going to load the comment into a file and then I'll be going to use Lang chain to load the data and split and summarize based on the public reaction so basically I'll be going to use this module Google gole API python client I'll be going to use YouTube API and set up the YouTube API so first thing I already installed this thing so if you click on this link it will go to a pip page and you have to install this thing now how to set up this thing YouTube API and Google thing so basically first go here and you have to go to this page like conso cloud.google.com and after that you have to click a project after creating the project from here you have to actually select YouTube API so basically if you search with YouTube API you'll be able to find like YouTube API version three so I'll show you here uh where is this let me show it I don't know why this is not coming maybe it is okay maybe load more yes so basically you have to click on this thing like this and it's already enabled for me so I already enabled right after you enable this thing uh what you have to do uh we have to actually this is my thing you have to go here and after that probably you have to uh create a credential or something okay so once you create the credential so basically if you go here you have to go in credential like this and after that you have to click create credential and basically after creating the credential you will get something like this thing and after this it is going to give you an API key and the API key you have to use in the program so basically um after creating the API key API will key will be uh like showed in the screen you have to use the same API key right and if you haven't done that part then you have to actually show you click this thing to show that key okay so I'll show you when I actually going to do it so basically what I'll just going to click on create credential API key so just hold on and this is my API key I will just copy this API key okay and close don't bury I will delete my API key after this tutorial okay so first thing I'll be going to load the command so basically so maybe I just say load. okay like this and I'll just keep it somewhere here and now let's start loading the command okay so basically first thing import Google API client. Discovery okay so for that you have to actually go to the documentation of this thing I already gave the link you will get it from there right so Discovery and next thing is actually you have to import Google API client. errors okay let's do this thing and let's make it a little bit bigger okay right the two things are done now what I'll do I'll be going to check what API service I'll be going to use so maybe I can just give a name uh let's say just hold on what service I'll be going to use so basically API uh servicecore name so basically API service name in my case will be YouTube right I'll be just going to this YouTube then API version is V3 okay my version is V3 right V3 and then developer key right so basically loer ke the key what exactly I'll be going to use okay just now I copied right something like this be going to cut this thing here and we'll just paste it here right right everything is done here right I just extra space here okay right so API key is there developer everything is and I'll be going to create a client so I'll just write YouTube right so this should be YouTube do comment right no sorry it should be Google API client so Google API client do Discovery do build I believe so build so how this is going to be built with API API service name version and the developer key right if you see there it is taking two things like service name right so what I do I'll be just going to write WR API service name so API service name then API version and then we'll be going to use the developer key developer key developer and then key developer key is actually going to be developer key right so these things are done let's see whether I'm able to set the client or not so client is actually ready if you see I'm not getting any error so it means everything is working fine right so next thing is actually I'll be going to actually uh create a request okay so basically let's say request so request is actually going to get it from this YouTube client right do comment right comment threads actually right so basically comment thread right comment then b h a v threads and then list okay like this okay now what will happen we'll be going to write part okay and let's do Sni okay then we just do video ID video then I and D so video ID will be the video ID uh whatever we are using it here so basically let's say I'll just going to copy this video ID if you have some better video ID you can do it okay so video ID is done then probably next thing is actually text format it should be uh plain text okay so text so format will be PL text okay pla I PL text okay so let's do whether uh what is this uh is close but it is saying that it is not close I don't know why so so it should be comma and it's fine now let's execute this thing okay so no error means this request is actually generated something right so basically now let response is equals to now we'll be going to execute the request so request. execute okay execute like this okay now let's do okay it is done now what will happen now what we'll do we'll be going to actually uh create a list because there are multiple comments like there so something like this now what you'll do we'll be going to write while response me my response is not blank then what will happen we'll be going to write something so let's say uh print response first okay so okay so basically it's coming so basically what we'll do uh I will just uh do something like this and see okay what I'm getting from here okay so this is is my response okay okay so basically in the response there is something called items and there are how many results are there 20 but I need to get up to how many so it is not good thing okay yes so there are total 4,000 comments are there so you have to iterate so basically every com there is something called Next PCH token you have to use the next PCH token to get this thing so basically um these items are actually having F so basically uh what we'll do while response and then inside that we'll be going to create a list so let's say we'll be going to write for item in response of items right this items and we'll just do like this and after that we'll actually going to print item okay so what I'll do I just prame the item and see right and after I think again it is going to be a problem so what I do just do this thing and it's fine so let's actually do this thing okay so this is the item so inside the item I have the things inside this sneit this is sneit have this thing and inside this sneit I have something called uh is to find this thing snipet uh how to item. snipet so let's see uh how to actually get this thing just hold on okay so let's see what we get from here okay so here my things are actually inside this top level content and top level inside the top level com comment again I have something called sneet and inside that it have display so basically top level com component Sneed and text display so basically first copy this thing okay so let's see let's see whether it will be not going to give a snippet uh here in the top level component is this thing okay so within the top level component I have something called snipet and inside the snipet I have the value okay so again I have something called snipet so s n i p p snipet yes so inside the sppid I need this text display so basically it is having the command so like that you have to actually frame your data now only this is going to give me the comment okay all 20 comments are coming right fine right so basically it is done now what will happen uh I have to actually appen this thing inside this list so M comment do append so I'm creating a list which is going to have all the comment right it is done but it is only having 20 records right so after this thing we have to check whether this next page token is actually available in response or not right if you see here uh there is something called uh I'm just checking thing it should be at the top level component yes what is this yes basically yes next pitch token is here in the response means it has another page so basically just copy this thing and I will write here here actually if next page token in response then what will what will happen so uh I think it has to be here right so if next page token is here then probably we have to again run the same thing again like uh this thing uh this thing again so basically again I'll be going to do the same thing okay but just copy this thing this and after that I have to just do something called dot execute and is doing this execute part here right so basically this is the response right so basically if this is done if this is done this is going to be execute this thing so basically here else it will be a break right else break okay so basically what is happening here what is happening uh is break and it should be so else break I don't know why in else it is not giving me this thing what it break can be us on break can only use with a loop yeah so obviously it is this thing yeah so basically now we have to actually frame this thing sorry I don't know while is here so basically okay I understood so now while uh [Music] this what is happening don't know so shift and something is not working then ship generally to works I don't know suddenly what happened my intell Sor not working okay so let's actually try with this thing just yes now it's working okay so basically like this like this so basically what is happening first I get this thing try to understand what is happening first it is getting the request right suppose it has only 100 so first 20 it is checking response has the value or not first it is checking and it is after that appending those 20 and after doing the 20 it is checking the next patch token is available in the response or not if it is next patch token is there it is actually uh going to do something here okay so the same thing actually it is going to do but here actually is it is doing something different right so basically page token you have to pass so basically page P page and token page token is actually going to get the value from where it is going to get the value from this request right uh uh sorry it is going to get the value from this response so basically response and then this next page token uh where is this this next page token right so basically it is going to give the next result right it is execute and after it is execute it is going to again come back here and it will check whether uh it has uh like response has value or not if response has value again it is come here and it is going to get the item and append it and again it will check for the next so like that it will keep on doing it right so what we'll do I just going to check the final list so print uh maybe I can just check the length of the list length of this command this command okay let's see uh maybe I can just write commment length of commment and we see how many is coming so that is actually going to tell me whether I'm able to get all uh items or not so this is going to be a two-part tutorial but I'll be going to do everything in together how to actually face the commment so basically it is saying PL text I don't know what is wrong there invalid syntax so basically t format is PL text p l i n t XT PL text but why this is giving the error I don't know uh text format is PL text text format is PL text so it is uh showing you what uh uh text format yes so basically after that I have to give up comma that is why it's not working okay fine so it should be around I think some of the comments obviously they are going to skip I don't know whether maybe due to some uh like API is not going to uh face everything which is not having any like proper sentence or something those filterings are there on the API side so basically it has let's say 4,000 right what is this so just hold on so let me oh my God so basically it has let's say 4,000 comments up there maybe 3,900 or 3,800 will be coming okay so it is still parsing the comment with this based on the this next p tokens so that that is why it is taking time okay so let's wait for some time it is going to give and it obviously it is going to take some time okay okay so again guys uh while these things are running on the background so guys you guys uh requested for some realtime use case using Lang chain and open AI so this is one of the tutorial you can actually correlate this thing uh with our present scenario like in the US also elections are going on so if somebody is actually watching this uh watching my channel from the United States maybe you can also replicate the same scenario from some of the video where actually Joe Biden or Donald Trump is actually doing uh some public speech or something whatever related to your election okay so let's see okay so basically every time it is going to get the 100 uh thing so because of that it is uh taking some time so maybe 20 iteration into 4,000 so maybe the loop has to run for uh 200 times right so that is why it is taking some time so let's wait for some time and once this is done I'll be just going to uh continue this thing from here so for the Tim being I'm just going to uh stop the recording okay because always the video length will increase okay so just keep it running but once this is finished I'll be going to actually show you from there okay all right so it has been finished so you can see the count 3,589 but if you go here it's around 4,000 so almost 500 or 450 comments are actually like skipped by YouTube API due to some reason okay so so some percentage will be like almost 10% okay now we need to actually capture this thing into a file so we'll be going to load everything inside a file so what I'll do I'll just going to actually import a mod IO and with the help of that I'll be going to write all the comments inside a file okay so how to do it so basically so with like I do open so we'll be going to create a file called comment. txt and we'll be going to open it in appen mode and then it will be encoding 58 right and then F1 and then we'll be going to write F1 right right so basically what exactly in the F1 so basically uh for can just write so every item from this Command right every item should be command should be there so maybe I can just write for data in comment like this and f1. WR data and after that I'll be just going to add paragraph So every comment will be in the new line and the next paragraph kind of a thing right and at the end we just write f1. close okay so all right so everything is done so once I execute this thing I'll be able to see some file is created called command. txt and inside that all commands will be written so we'll start this thing now so let's wait for some time okay okay so let's wait uh it is giving me some error I don't know what is that error uh it is saying that uh what is say U API server failed to successfully process that can be transient error it usually indicates the reest input in check the structure of the code the AP server fail to Su okay so I don't know why you are getting this error suddenly okay let's try to do it one more time okay so I believe it should be txtx okay yeah it is obviously going to take some time but I don't know like while doing that means I have actually requesting multiple times within one minute I'm just again calling the same API so maybe because of that it is some doing some problem right so file is created and everything is done if you see file is created command. TX so what I'll just do I'll just going to rename it fine so all commands are load right okay fine so now what we'll do we'll be going to load this file using Lang chain document loader and we'll be going to get our desert thing so we'll be going to actually create a file called summarize dopy right now we'll be going to load this file okay so what you'll do I'll just clear everything here and I'll just try to do it from here right okay so what I'll do uh we'll be going to import some necessary modules right so basically from L chain okay dot community so I believe lore community so Community do document loaders right inut text loader right then from L chain do chain do summarize okay import load I believe load summarize chain is not required we be not going to use that okay so lch underscore maybe open lch underscore import chat open from Lang ch dot text spitter import recursive character text spitter okay from L chain do proms inut CHC template okay fine this is done now what you do llm chat prom template and we'll be going to actually write this thing so basically first in the model okay so model equals to GP hyen 4 right and then what we'll do we going to write temperature uh temperature is not coming [Music] then temper equals to z z and then we going to pass Max tokens I believe Max tokens maybe I can just say one24 right okay it's done so what I'll do I'll be going to create a template okay so template PL so template and there I'll be going to create a prom template so basically okay uh uh analyze the below set of comments and generate public sentiment one uh so basically mostly comments are actually around the political party BJP like whether uh they are going to win it or lose it so basically um I just want to actually make it like kind of very specific for the llm that whether uh what is the sentiment of the user on the ruling party whether they're going to they're supporting BJP or they're not going to support BJP from a specific comment right so that is why I'm just writing in that way okay analyze the below setup comments and generate public sentiment on BJP for the upcoming election 2024 right and I just write just write uh uh very few sentences which clearly states public reaction whether there supporting djp Lo with the Reon okay and then what we'll do we'll be going to just write a context right something like this okay so I'll just write the context then after that I'll be going to create a prompt PT promp is actually chat prom template okay do from template and we'll be just going to write this template inside that so my template is done now we going to create a variable called loader so this going to now load the file so basically it should be text loader okay so text loader is actually going to get the file from command. txt this file and just because it has multiple uh lines at there we need to uh like split this thing so basically doc equals to loader load okay okay then llm equals to chat open AI like this thing then temperature okay so chat open or AI I believe LM Lim is already defined I don't need this thing again okay so now what will happen we'll be going to create a variable called text splitter this I split sorry I just forget the spelling SP splitter okay text splitter is actually recursive character text splitter and I'll be going to mention the Chun size Chun size Let's uh do the Chun size around let's say 5,000 right 5,000 chunks are there from um maybe uh okay I'll just do it with 2,000 first okay let's see how these things are going to come and chunk underscore overl is zero okay done and then we'll be going to actually create multiple text using text splitter uh do spit document right and inside that I'll just pass the docks right and after that what we'll do I'll be just going to print the length of t okay this is definitely going to be a text okay like this okay done okay so this is happening so I don't know what is the problem here which line is the problem so gbt for temp p r 00 for Max token so basically it has okay so check from template uh actually has the problem here so basically it should be chat opening right so chat open obviously the problem is here right so 96 number of documents are there so basically let me actually make it 5,000 so it should be less than this one 38 so maybe I can make it a little bit bigger 7,000 27 so why can't we do it for 10,000 then okay 91 so it will be uh like couple of things only okay so let's try to do this thing now okay so now what you'll do for Tex in so everything is done so for text in text right now what we'll do we'll be going to create something called message message is actually going to be this prompt do format okay so inside that what we'll do we'll be going to pass this context right so my context is actually going to be context is actually going to be this text message text right now what we'll be going to do we'll be going to just print write llm do invoke okay so lnl invoke is actually going to be what it will be going to be this message right so basically uh whatever is going to come from this thing we have to just write content okay so this is done right so basically what will happen this is not going to give me the result of this thing so basically for every splitted document I'm actually going to run this prompt on that I'll be going to get the separate like section like I'll be going to get multiple summary or multiple analysis from the report so the generaliz thing will be going to come because it is having like big chunk of document like if you want to again summarize the entire thing at the big end you can do it like after that you have to use a kind of a summary so then this is going to give you the summary but I don't want the summary I want this uh template to be run okay so let's execute this okay okay it started so what it is saying chat open has uh nothing called invol invoke it is going to be invoke the okay so let's do it okay F running so let's wait okay okay again it is giving some error so it is saying that uh uh for more details uh in sufficient CA you exceed your current Kota please check your billing details I don't know what is happening so maybe uh I need to uh like increase my Cod and and come back obviously I'm using a paid service so don't worry about this thing I'll be come back in 2 minute okay all right so I fixed this thing so let's execute this thing first whether let's see I'm able to uh get this thing done or not so I have actually recharged with 10 us okay so start giving me this thing so see based on the analysis of the comments the public sentiments yeah it's giving this thing so what I'll do I'll just kill the terminal okay and I'll just try to actually do some something here uh so basically after every commment I just put to paragraph okay okay and I'll just try to make it let's say 7,000 okay 5,000 is giving answer so let's do 7,000 okay so less number of like iteration is going to be required okay yes so one came so based on the analysis comings provided the public sentiments towards BJP for the upcoming election 24 appears to be largely negative many so it's giving negative so let's see try to understand how many things are there and based on that we'll actually okay so let's wait for some time okay so everything will be coming okay mhm so basically I can see there is largely negative things are coming so public sentiment towards BJP is appears to be largely negative negative so this three section is actually negative4 negative this is also negative yes so I can see everything is negative here so this is very like uh very bad thing actually for the ruling party but yeah that is what it is okay right so so some mix negative sentiments are actually there but yeah so so yeah people it seems like uh like people are actually not happy with the present uh government so there are a lot of negative things are coming right so basically um what does it mean does it mean that uh if you if you actually uh compare with uh maybe 100 videos and every videos are actually having at least 30 million 10 million views so basically those 30 million views are actually not going to give you the wrong answer because those million views are actually going to be watched by some real user CU this is not an entertainment and fun content some content which is related to some social problem some generic country uh country oriented or the Public's problem or the general people problem or the or the or everyone's problem our problem your problem right so if someone is actually going to watch that video and after that if you're going to put some comment it means those comments are realistic right yeah I'm not saying everything is realistic there could be some paid promotion must be there like ruling party on opposition parties are actually doing some paid reviews paid comment just to actually create some hype within the market so we have to consider that part as well but I'm just thinking that every comment is actually uh like ethical comment and a real person is actually behind the real comment okay so in that aspect it seems that like BJP is actually going to do very bad in the upcoming election at least from this one video I don't know the uh I don't know what exactly is going to happen maybe if I just do the same thing with next 100 videos and out of that next 80 videos are going to be positive response from BJP then probably the ruling part is actually going to do but I just did with one video and the audience of the like not audience like the public opinion is actually negative for BJP so I can comment on that uh like if we're going to get the same uh response from other videos obviously BJP is actually going to do bad result in the election but obviously we're going to do with some other videos and getting response then probably I could change my commment so basically you guys can take this thing as an homework for or assignment for you just try to do it like let's the other videos as well and try to actually get the result and just try to predict like what exactly is actually going to be the result and you can create something similar like so this is the way only the um like in the classical day of like um polling like exit Pole or kind of things are happening like the if the persons are going for polling in the the election day and ones are actually coming back after the after casting their vote maybe the big news channels are reporters are actually going to ask them like they're going to ask them for let's say thousand people just like a survey here actually if survey results are already posted in the YouTube I'm just using that survey and generating the result but um in in exit pole kind of a thing like a real user is actually going to ask a real person okay anonymously they are going to actually ask this question and they are going to respond and based on that they that okay maybe they going to ask 100 people and 80 people is saying that they are actually going to think BJP is going to do good this are the problem and blah blah right so based on that they will do but here everything is automatic with the help of AI we can do it right okay so maybe I can just uh reframe this thing in a different way and see whether so you see everything is largely negative here like okay so sh some mix mix things are there so mix is there okay okay so what I'll do I'll just try to actually change this part just write a sentence just write one sentence not and just write one sentence like [Music] um positive for BJP when so just write one system positive for D or negative for BJP Okay negative for BJP if sign has positive for V you find find comments are supporting BJ right El just wr4 if you not supporting okay I believe everything is done so now I'll just say just write one sentence that negative for BJP or positive for BJP and let's see how many like things are coming okay so let's see I'm just trying it I don't know how it is going to be like this so kill terminal and let's do it okay Okay negative for vjp negative for BJP negative for BJP negative see how many negatives are coming right so let's kill the terminal and let's see uh just this okay okay it's a negative for BJP negative for BJP okay so do so negative for BJP negative negative negative negative 1 2 3 4 5 6 7 so there is nothing positive for BJP right so this is very surprising okay I need to actually uh okay I need to actually modify my template as well so I'll do it now okay okay this is very surprising okay okay so this is this is very surprising yeah just out of that only one positive for BJP so basically if you do the similar analysis with other videos so basically if you are able to generate the similar response you can obviously say that audience or like people people are actually not happy with the present government so this is not your own opinion this is the opinion of the public and you are actually uh doing some research based on the AI to actually replicate the user like opinion in kind of a very uh nice looking uh like structure kind of award like nice looking means just positive or negative So based on that you can decide whether BJP is actually going to do well or not why I'm emphasizing the word BJP because they're in the ruling party so when another opposition is coming definitely they they have to overdo uh like on top of that opposition like so basically if the opponent are actually going to do better or if the people are thinking that ruling part is actually not doing the right thing so then the next opponent is actually going to do better so understand this thing I'm actually emphasizing this point over here right so hopefully the you guys actually going to like this video and whatever I said just try to do with the other videos please try to do it this will definitely give you a real kind of use case Okay so and the election dates are actually already declared and you will you'll be able to find a lot of other videos as well and try to do it every day and we try to actually create your own like knowledge based like um and see at after the uh after the election whether your analysis actually going to match with the actual result right and I I'll actually suggest you guys to actually try to apply the same logic from multiple videos from multiple YouTube channel or multiple YouTubers right I'm not saying that this channel is actually uh biased toward this political party or this all these comments are actually paid coming from some party so just forget about that we are professional we just think everything is uh top note and everything is actually happening in a ethical way right so try to do your job and again I'm just going to put as a disclaimer so for everyone I'm just uh doing this video for educational purpose my intention is actually not to harm anyone so basically uh every data analytics company like market research companies are doing the similar work but I got often got multiple request how this sort of things can be done using Ai and life language model so just because elections are going on I'm creating this video so hopefully you guys will like this video and if you really like my video and like my work please try to subscribe to my channel if somebody is actually coming for the first time it's a humble request guys please sub try to subscribe to our Channel hit the like button share our videos with family and friend and if these videos are helping you to actually do better in your job or study or or any any aspect please try to let us know some sort of positive feedback because this will help us to motivate and YouTube algorithm will actually promote our video to large number of audience and that is our ultimate goal more number of audien is actually going to uh help me to grow and grow growing means in terms of monetary Gams and also obviously the audience G so please please guys help me to actually grow and I'll come back again with some nice contents right okay so that's it guys I'm going to conclude the video here uh I'll be going to upload few more videos about this weekend but I don't know how actually this things are going to happen because I have some other class but uh I'll upload very soon till the time take care goodbye have a nice day have a nice weekend and keep learning happy study [Music] okay